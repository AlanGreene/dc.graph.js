/*!
 *  dc.graph 0.1.0
 *  http://dc-js.github.io/dc.graph.js/
 *  Copyright 2015 Gordon Woodhull
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

!function(){function a(a,b,c){"use strict";var d={version:"0.1.0"},e=function(a){var b=a,c=null,d=function(a){return arguments.length?(b=a,c&&c(),this):b};return d.react=function(a){return arguments.length?(c=a,this):c},d};return d.diagram=function(b,d){function f(){o=cola.d3adaptor().avoidOverlaps(!0).size([j.width(),j.height()]),j.modLayout()&&j.modLayout()(o)}function g(a){return function(b){return a(b.orig)}}function h(a,b){b.attr("d",function(a){var b=a.target.x-a.source.x,c=a.target.y-a.source.y,d=Math.sqrt(b*b+c*c),e=b/d,f=c/d,g=j.nodeRadiusAccessor()(a.source.orig)-1,h=j.nodeRadiusAccessor()(a.target.orig)-1,i=a.source.x+g*e,k=a.source.y+g*f,l=a.target.x-h*e,m=a.target.y-h*f;return"M"+i+","+k+"L"+l+","+m}).attr("width",function(a){var b=a.source.x-a.target.x,c=a.source.y-a.target.y;return Math.sqrt(b*b+c*c)}),a.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})}function i(){return k=j.root().append("svg").attr("width",j.width()).attr("height",j.height())}var j={},k=null,l=null,m=null,n=null,o=null,p=25,q=a.dispatch("end");j.root=e(null),j.width=e(200),j.height=e(200),j.nodeDimension=e(),j.nodeGroup=e(),j.edgeDimension=e(),j.edgeGroup=e(),j.nodeKeyAccessor=e(function(a){return a.key}),j.edgeKeyAccessor=e(function(a){return a.key}),j.sourceAccessor=e(),j.targetAccessor=e(),j.nodeRadiusAccessor=e(function(){return p}),j.nodeStrokeWidthAccessor=e(function(){return"1"}),j.nodeStrokeAccessor=e(function(){return"black"}),j.nodeFillAccessor=e(function(){return"white"}),j.nodePadding=e(6),j.nodeLabelAccessor=e(function(a){return a.value.label||a.value.name}),j.edgeStrokeAccessor=e(function(){return"black"}),j.edgeStrokeWidthAccessor=e(function(){return"1"}),j.edgeOpacityAccessor=e(function(){return"1"}),j.transitionDuration=e(500),j.constrain=e(function(){return[]}),j.initLayoutOnRedraw=e(!1),j.modLayout=e(function(){}),j.showLayoutSteps=e(!0);var r={},s={};return j.redraw=function(){var a=j.nodeGroup().all(),b=j.edgeGroup().all();o&&o.stop();var c=a.reduce(function(a,b,c){return a[j.nodeKeyAccessor()(b)]=c,a},{}),d=a.map(function(a){r[a.key]||(r[a.key]={});var b=r[a.key];return b.orig=a,b.width=2*j.nodeRadiusAccessor()(a)+j.nodePadding(),b.height=2*j.nodeRadiusAccessor()(a)+j.nodePadding(),b}),e=b.map(function(a){s[a.key]||(s[a.key]={});var b=s[a.key];return b.orig=a,b.source=c[j.sourceAccessor()(a)],b.target=c[j.targetAccessor()(a)],b}).filter(function(a){return void 0!==a.source&&void 0!==a.target}),i=n.selectAll(".edge").data(e,g(j.edgeKeyAccessor())),k=(i.enter().append("svg:path").attr("class","edge").attr("stroke",g(j.edgeStrokeAccessor())).attr("stroke-width",g(j.edgeStrokeWidthAccessor())).attr("opacity",g(j.edgeOpacityAccessor())),i.exit());k.remove();var l=m.selectAll(".node").data(d,g(j.nodeKeyAccessor())),p=l.enter().append("g").attr("class","node");p.append("circle"),p.append("text").attr("class","nodelabel"),l.select("circle").attr("r",g(j.nodeRadiusAccessor())).attr("stroke",g(j.nodeStrokeAccessor())).attr("stroke-width",g(j.nodeStrokeWidthAccessor())).attr("fill",g(j.nodeFillAccessor())),l.select("text").text(g(j.nodeLabelAccessor()));var t=l.exit(),u=j.constrain()(d,e);return t.remove(),j.initLayoutOnRedraw()&&f(),o.on("tick",j.showLayoutSteps()?function(){h(l,i)}:null),o.nodes(d).links(e).constraints(u).start(10,20,20).on("end",function(){j.showLayoutSteps()||h(l,i),q.end()}),this},j.render=function(){return j.initLayoutOnRedraw()||f(),j.resetSvg(),l=k.append("g"),n=l.append("g"),m=l.append("g"),j.redraw()},j.on=function(a,b){return q.on(a,b),this},j.select=function(a){return j.root().select(a)},j.resetSvg=function(){return j.select("svg").remove(),i()},j.root(a.select(b)),c.registerChart(j,d),j},d.load_graph=function(b,c){/\.json$/.test(b)?a.json(b,c):/\.gv|\.dot$/.test(b)&&a.text(b,function(a,b){if(a)return void c(a,null);var d=graphlibDot.parse(b),e=d.nodes(),f=new Array(e.length);e.forEach(function(a,b){var c=f[b]=d._nodes[e[b]];c.id=b,c.name=a});var g=d.edges(),h=[];g.forEach(function(a){var b=d._edges[a];h.push({source:d._nodes[b.u].id,target:d._nodes[b.v].id,sourcename:b.u,targetname:b.v})});var i={nodes:f,links:h};c(null,i)})},d.generate=function(a,b,c){function d(a){return{id:a,name:String.fromCharCode(97+a)}}function e(a,b,c){return{source:b,target:a,sourcename:f[b].name,targetname:f[a].name,length:c}}var f,g,h,i;switch(a){case"clique":for(f=new Array(b),g=[],h=0;b>h;++h)for(f[h]=d(h),i=0;h>i;++i)g.push(e(h,i));break;case"wheel":var j=200,k=Math.floor(b/2),l=2*j*Math.sin(Math.PI/b),m=2*j*Math.sin(k*Math.PI/b);for(f=new Array(b),g=[],h=0;b>h;++h)f[h]=d(h);for(h=0;b>h;++h)g.push(e(h,(h+1)%b,l)),g.push(e(h,(h+k)%b,m)),b%2&&g.push(e(h,(h+b-k)%b,m));break;default:throw new Error("unknown generation type "+a)}var n={nodes:f,links:g};c(null,n)},d.d3=a,d.crossfilter=b,d.dc=c,d}if("function"==typeof define&&define.amd)define(["d3","crossfilter","dc"],a);else if("object"==typeof module&&module.exports){var b=require("d3"),c=require("crossfilter");"function"!=typeof c&&(c=c.crossfilter);var d=require("dc");module.exports=a(b,c,d)}else this.dc_graph=a(d3,crossfilter,dc)}();
//# sourceMappingURL=dc.graph.min.js.map