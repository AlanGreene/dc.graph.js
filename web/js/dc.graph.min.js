/*!
 *  dc.graph 0.1.0
 *  http://dc-js.github.io/dc.graph.js/
 *  Copyright (c) 2015 AT&T Intellectual Property
 *
 */

!function(){function a(a,b,c){"use strict";function d(a,b){return function(){return a(b.apply(null,arguments))}}function e(a){return a.orig}function f(a){return v.functor_wrap(a,e)}function g(a,b,c){for(var d=["M",a[0],",",a[1]],e=b,f=!1,g=2;g<a.length;g+=2)(isNaN(a[g])||isNaN(a[g+1]))&&(f=!0),d.push(e===b?y[b]:" ",a[g],",",a[g+1]),0===--e&&(e=b);return e!=b&&console.log("warning: pts.length didn't match bezness",a,b),c&&d.push("Z"),d.join("")}function h(a,b,c,d){var e=Math.tan(Math.atan2(d,c));e*=e;var f={x:a*b/Math.sqrt(b*b+a*a*e),y:a*b/Math.sqrt(a*a+b*b/e)};return 0>c&&(f.x=-f.x),0>d&&(f.y=-f.y),f}function i(a,b,c){return b>=a-z&&c+z>=b}function j(a,b,c,d,e,f,g,h){var j=((a*d-b*c)*(e-g)-(a-c)*(e*h-f*g))/((a-c)*(f-h)-(b-d)*(e-g)),k=((a*d-b*c)*(f-h)-(b-d)*(e*h-f*g))/((a-c)*(f-h)-(b-d)*(e-g));if(isNaN(j)||isNaN(k))return!1;if(a>=c){if(!i(c,j,a))return!1}else if(!i(a,j,c))return!1;if(b>=d){if(!i(d,k,b))return!1}else if(!i(b,k,d))return!1;if(e>=g){if(!i(g,j,e))return!1}else if(!i(e,j,g))return!1;if(f>=h){if(!i(h,k,f))return!1}else if(!i(f,k,h))return!1;return{x:j,y:k}}function k(a,b,c,d,e){for(var f=0;f<a.length;f+=2){var g=f===a.length-2?0:f+2,h=j(a[f],a[f+1],a[g],a[g+1],b,c,d,e);if(h)return h}return null}function l(a,b,c,d){switch(b.dcg_shape.shape){case"ellipse":return h(b.dcg_rx,b.dcg_ry,c,d);case"polygon":return k(b.dcg_points,0,0,c,d)}}function m(a){switch(a.shape){case"ellipse":return{shape:"ellipse"};case"egg":return{shape:"polygon",sides:100,distortion:-.25};case"triangle":return{shape:"polygon",sides:3};case"diamond":return{shape:"polygon",sides:4,rotation:45};case"trapezium":return{shape:"polygon",sides:4,distortion:-.5};case"parallelogram":return{shape:"polygon",sides:4,skew:.5};case"pentagon":return{shape:"polygon",sides:5};case"hexagon":return{shape:"polygon",sides:6};case"septagon":return{shape:"polygon",sides:7};case"octagon":return{shape:"polygon",sides:8};case"invtriangle":return{shape:"polygon",sides:3,rotation:180};case"invtrapezium":return{shape:"polygon",sides:4,distortion:.5};case"square":return{shape:"polygon",sides:4};case"polygon":return{shape:"polygon",sides:a.sides,skew:a.skew,distortion:a.distortion,rotation:a.rotation};default:throw new Error("unknown shape "+a.shape)}}function n(a){return function(b){var c=f(a.nodeShape())(b);b.dcg_shape=m(c),b.dcg_shape["abstract"]=c}}function o(a){return function(b){var c=f(a.nodeShape())(b),d=b.dcg_shape["abstract"];return c.shape!==d.shape?!0:"polygon"===c.shape?c.shape.sides!==d.sides||c.shape.skew!==d.skew||c.shape.distortion!==d.distortion||c.shape.rotation!==d.rotation:!1}}function p(){return function(a){var b,c=a.dcg_shape.shape;switch(c){case"ellipse":b="ellipse";break;case"polygon":b="path";break;default:throw new Error("unknown shape "+c)}return document.createElementNS("http://www.w3.org/2000/svg",b)}}function q(a){return function(b){var c,d=f(a.nodeRadius())(b),e=2*d+a.nodePadding();f(a.nodeFitLabel())(b)&&(c=this.getBBox());var g=0;if(c&&c.width&&c.height){var h=c.height/2/d,i=c.width/2/Math.sqrt(1-h*h);g=2*i+a.nodePadding(),b.dcg_rx=Math.max(i,d),b.dcg_ry=d,"polygon"===b.dcg_shape.shape&&(b.dcg_rx/=Math.cos(Math.PI/b.dcg_shape.sides))}else b.dcg_rx=b.dcg_ry=d;b.width=Math.max(g,e),b.height=e}}function r(){return{rx:function(a){return a.dcg_rx},ry:function(a){return a.dcg_ry}}}function s(){return{d:function(a){var b=a.dcg_shape,c=b.sides||4,d=b.skew||0,e=b.distortion||0,f=b.rotation||0,h=c%2?0:.5,i=[];f=f/360+.25;for(var j=0;c>j;++j){var k=-((j+h)/c+f)*Math.PI*2,l=a.dcg_rx*Math.cos(k),m=a.dcg_ry*Math.sin(k);l*=1+e*((a.dcg_ry-m)/a.dcg_ry-1),l-=d*m/2,i.push(l,m)}return a.dcg_points=i,g(i,1,!0)}}}function t(b){return function(c){var d=a.select(this);switch(c.dcg_shape.shape){case"ellipse":d.attr(r(b,c));break;case"polygon":d.attr(s(b,c));break;default:throw new Error("unknown shape "+c.dcg_shape.shape)}}}function u(a){var b=function(){return{type:"alignment",axis:a}};return b.listname="offsets",b.wrap=function(a){return{node:a,offset:0}},b}var v={version:"0.1.0"},w=function(a){var b=a,c=null,d=function(a){return arguments.length?(c&&c(a),b=a,this):b};return d.react=function(a){return arguments.length?(c=a,this):c},d},x=function(a){return a};v.functor_wrap=function(a,b){return"function"==typeof a?b?function(c){return a(b(c))}:a:function(){return a}};var y={1:"L",2:"Q",3:"C"},z=1e-7;return v.diagram=function(i,j){function k(){switch(M=cola.d3adaptor().avoidOverlaps(!0).size([H.width(),H.height()]).handleDisconnected(H.handleDisconnected()),H.lengthStrategy()){case"symmetric":M.symmetricDiffLinkLengths(H.baseLength());break;case"jaccard":M.jaccardLinkLengths(H.baseLength());break;case"individual":M.linkDistance(function(a){var b=a.orig?f(H.edgeLength())(a):a.internal&&a.internal.distance;return b||H.baseLength()});break;case"none":}H.modLayout()&&H.modLayout()(M)}function m(a){return"edge-"+f(H.edgeKey())(a).replace(/[^\w-_]/g,"-")}function r(a){return!!a.source&&!!a.target}function s(a){N.end(a),Q=!1,T&&(T=!1,window.setTimeout(function(){H.startLayout()},0))}function u(a,b,c,d,e){var i,j,k,m,n,o,p=d-b,q=e-c,r=a.source.dcg_ry+f(H.nodeStrokeWidth())(a.source)/2,s=a.target.dcg_ry+f(H.nodeStrokeWidth())(a.target)/2;if(a.parallel){var t=!!(a.parallel%2)==d>b?-1:1,u=Math.floor((a.parallel+1)/2)*t,v=Math.atan2(q,p),w=v+u*H.parallelEdgeOffset()/r,x=v-Math.PI-u*H.parallelEdgeOffset()/s,y=Math.cos(w),z=Math.sin(w),A=Math.cos(x),B=Math.sin(x),C=Math.hypot(d-b,e-c);n=h(a.source.dcg_rx,a.source.dcg_ry,y,z),o=h(a.target.dcg_rx,a.target.dcg_ry,A,B);var D=Math.hypot(n.x,n.y),E=Math.hypot(o.x,o.y),F=Math.max(D+r/4,Math.min(2*D,C/2)),G=Math.min(E+s/4,Math.min(2*E,C/2));i=b+n.x,j=c+n.y;var I=b+F*y,J=c+F*z,K=d+G*A,L=e+G*B;return k=d+o.x,m=e+o.y,a.length=Math.hypot(k-i,m-j),g([i,j,I,J,K,L,k,m],3)}return n=l(H,a.source,p,q),o=l(H,a.target,-p,-q),n||(n={x:0,y:0}),o||(o={x:0,y:0}),i=b+n.x,j=c+n.y,k=d+o.x,m=e+o.y,a.length=Math.hypot(k-i,m-j),g([i,j,k,m],1)}function y(a){return u(a,a.source.prevX||a.source.x,a.source.prevY||a.source.y,a.target.prevX||a.target.x,a.target.prevY||a.target.y)}function z(a){return u(a,a.source.x,a.source.y,a.target.x,a.target.y)}function A(a,b){a.every(function(a){return 0===a.size()})&&b();var c=0;a.forEach(function(a){a.each(function(){++c}).each("end.all",function(){--c||b()})})}function B(a,b,c,d,e,g,h){console.assert(Q),console.assert(c.data().every(r)),b.attr("transform",function(a){return"translate("+a.x+","+a.y+")"});var i=a.transition().duration(H.transitionDuration()).attr("opacity","1").attr("transform",function(a){return"translate("+a.x+","+a.y+")"});i.each("end.record",function(a){a.prevX=a.x,a.prevY=a.y}),d.attr("d",y);var j=c.transition().duration(H.transitionDuration()).attr("opacity",f(H.edgeOpacity())).attr("d",z);H.showLayoutSteps()||A([i,j],function(){s(!0)}),e.attr("d",z),h.transition().duration(H.transitionDuration()).attr("transform",function(a){if(a.target.x<a.source.x){var b=this.getBBox(),c=b.x+b.width/2,d=b.y+b.height/2;return"rotate(180 "+c+" "+d+")"}return"rotate(0)"})}function C(){J.attr("transform","translate("+a.event.translate+") scale("+a.event.scale+")")}function D(){I&&I.attr("width",H.width()).attr("height",H.height())}function E(){return I=H.root().append("svg"),D(),H.defineArrow("vee",12,12,10,0,function(a){a.append("svg:path").attr("d","M0,-5 L10,0 L0,5 L3,0").attr("stroke-width","0px")}),H.defineArrow("dot",7,7,0,0,function(a){a.append("svg:circle").attr("r",5).attr("cx",5).attr("cy",0).attr("stroke-width","0px")}),H.mouseZoomable()&&I.call(a.behavior.zoom().on("zoom",C)),I}var F,G,H={},I=null,J=null,K=null,L=null,M=null,N=a.dispatch("end","start","drawn"),O={},P={},Q=!1;H.width=w(200).react(D),H.height=w(200).react(D),H.root=w(null).react(function(a){a.empty()&&console.log("Warning: parent selector "+i+" doesn't seem to exist")}),H.mouseZoomable=w(!0),H.nodeDimension=w(),H.nodeGroup=w(),H.edgeDimension=w(),H.edgeGroup=w(),H.nodeKey=H.nodeKeyAccessor=w(function(a){return a.key}),H.edgeKey=H.edgeKeyAccessor=w(function(a){return a.key}),H.edgeSource=H.sourceAccessor=w(function(a){return a.value.sourcename}),H.edgeTarget=H.targetAccessor=w(function(a){return a.value.targetname}),H.nodeRadius=H.nodeRadiusAccessor=w(25),H.nodeStrokeWidth=H.nodeStrokeWidthAccessor=w(1),H.nodeStroke=H.nodeStrokeAccessor=w("black"),H.nodeFillScale=w(null),H.nodeFill=H.nodeFillAccessor=w("white"),H.nodePadding=w(6),H.nodeLabel=H.nodeLabelAccessor=w(function(a){return a.value.label||a.value.name}),H.nodeLabelFill=H.nodeLabelFillAccessor=w(null),H.nodeFitLabel=H.nodeFitLabelAccessor=w(!0),H.nodeShape=w({shape:"ellipse"}),H.nodeTitle=H.nodeTitleAccessor=w(function(a){return H.nodeKeyAccessor()(a)}),H.nodeOrdering=w(null),H.nodeFixed=H.nodeFixedAccessor=w(null),H.edgeStroke=H.edgeStrokeAccessor=w("black"),H.edgeStrokeWidth=H.edgeStrokeWidthAccessor=w(1),H.edgeOpacity=H.edgeOpacityAccessor=w(1),H.edgeLabel=H.edgeLabelAccessor=w(function(a){return H.edgeKey()(a)}),H.edgeArrowhead=H.edgeArrowheadAccessor=w("vee"),H.edgeArrowtail=H.edgeArrowtailAccessor=w(null),H.edgeIsLayout=H.edgeIsLayoutAccessor=w(function(a){return!a.value.notLayout}),H.lengthStrategy=w("symmetric"),H.edgeLength=H.edgeDistanceAccessor=w(function(a){return a.value.distance}),H.baseLength=w(30),H.highlightNeighbors=w(!1),H.transitionDuration=w(500),H.timeLimit=w(0),H.constrain=w(function(){return[]}),H.parallelEdgeOffset=w(5),H.edgeOrdering=w(null),H.initLayoutOnRedraw=w(!1),H.layoutUnchanged=w(!1),H.relayout=function(){return F=G=null,this},H.induceNodes=w(!1),H.modLayout=w(function(){}),H.showLayoutSteps=w(!1),H.legend=w(null).react(function(a){a.parent(H)}),H.child=function(a,b){return P[a]&&P[a].parent(null),P[a]=b,b.parent(H),H},H.handleDisconnected=w(!0);var R={},S={};H._buildNode=function(a,b){H.nodeTitle()&&b.append("title"),b.each(n(H));var c=a.filter(o(H));c.select(".node-shape").remove(),c.each(n(H)),c.insert(p(H),":first-child").attr("class","node-shape"),b.append(p(H)).attr("class","node-shape"),b.append("text").attr("class","node-label").attr("fill",f(H.nodeLabelFill())),a.select("title").text(f(H.nodeTitle())),a.select("text.node-label").text(f(H.nodeLabel())).each(q(H)),a.select(".node-shape").each(t(H)).attr({stroke:f(H.nodeStroke()),"stroke-width":f(H.nodeStrokeWidth()),fill:d(H.nodeFillScale()||x,f(H.nodeFill()))})},H.isRunning=function(){return Q};var T=!1;return H.redraw=function(){return Q?(T=!0,this):H.startLayout()},H.startLayout=function(){function c(a){var b=H.nodeKey()(a);R[b]||(R[b]={});var c=R[b];c.orig=a;var d;return H.nodeFixed()&&(d=f(H.nodeFixed())(c)),d?(c.x=a.x,c.y=a.y,c.fixed=!0):c.fixed=!1,i[b]=!0,c}function d(a){var b=H.edgeKey()(a);S[b]||(S[b]={});var c=S[b];return c.orig=a,c.source=R[H.edgeSource()(a)],c.target=R[H.edgeTarget()(a)],j[b]=!0,c}var g=H.nodeGroup().all(),h=H.edgeGroup().all();if(Q)throw new Error("dc_graph.diagram.redraw already running!");Q=!0,M&&M.stop(),H.initLayoutOnRedraw()&&k(),H.nodeOrdering()&&(g=b.quicksort.by(H.nodeOrdering())(g.slice(0),0,g.length)),H.edgeOrdering()&&(h=b.quicksort.by(H.edgeOrdering())(h.slice(0),0,h.length));var i={},j={},l=g.map(c);for(var n in R)i[n]||delete R[n];var o=h.map(d);for(var p in S)j[p]||delete S[p];if(o=o.filter(r),o=o.filter(function(a){return a.source!==a.target}),H.induceNodes()){var q={};o.forEach(function(a){q[f(H.edgeSource())(a)]=!0,q[f(H.edgeTarget())(a)]=!0}),l=l.filter(function(a){return q[f(H.nodeKey())(a)]})}l.forEach(function(a,b){a.index=b}),O={nnodes:l.length,nedges:o.length};var t=!1;if(!H.layoutUnchanged()){var u=JSON.stringify(l.map(e)),w=JSON.stringify(o.map(e));u===F&&w===G&&(t=!0),F=u,G=w}if(H.parallelEdgeOffset()){for(var x=new Array(l.length),y=0;y<x.length;++y){x[y]=new Array(x.length);for(var z=0;z<x.length;++z)x[y][z]=0}o.forEach(function(a){var b=Math.min(a.source.index,a.target.index),c=Math.max(a.source.index,a.target.index);a.parallel=x[b][c]++})}var A=L.selectAll(".edge").data(o,f(H.edgeKey())),C=A.enter().append("svg:path").attr({"class":"edge",id:m,opacity:0});A.attr("stroke",f(H.edgeStroke())).attr("stroke-width",f(H.edgeStrokeWidth())).attr("marker-end",function(a){var b=f(H.edgeArrowhead())(a);return b?"url(#"+b+")":null}).attr("marker-start",function(a){var b=f(H.edgeArrowtail())(a);return b?"url(#"+b+")":null}),A.exit().transition().duration(H.transitionDuration()).attr("opacity",0).remove();var D=L.selectAll(".edge-hover").data(o,f(H.edgeKey())),E=D.enter().append("svg:path").attr("class","edge-hover").attr("opacity",0).attr("stroke","green").attr("stroke-width",10).on("mouseover",function(b){a.select("#"+m(b)+"-label").attr("visibility","visible")}).on("mouseout",function(b){a.select("#"+m(b)+"-label").attr("visibility","hidden")});D.exit().remove();var I=L.selectAll(".edge-label").data(o,f(H.edgeKey())),J=I.enter().append("text").attr("id",function(a){return m(a)+"-label"}).attr("visibility","hidden").attr({"class":"edge-label","text-anchor":"middle",dy:-2}).append("textPath").attr("startOffset","50%").attr("xlink:href",function(a){return"#"+m(a)}).text(function(a){return f(H.edgeLabel())(a)});I.exit().transition().duration(H.transitionDuration()).attr("opacity",0).remove();var P=K.selectAll(".node").data(l,f(H.nodeKey())),U=P.enter().append("g").attr("class","node").attr("opacity","0").call(M.drag);H.highlightNeighbors()&&U.on("mouseover",function(a){A.attr("stroke-width",function(b){return(b.source===a||b.target===a?2:1)*f(H.edgeStrokeWidth())(b)})}).on("mouseout",function(){A.attr("stroke-width",f(H.edgeStrokeWidth()))}),H._buildNode(P,U),P.exit().transition().duration(H.transitionDuration()).attr("opacity",0).remove(),N.drawn(P,A);var V=H.constrain()(l,o);V.forEach(function(a){if(a.type)switch(a.type){case"alignment":a.offsets.forEach(function(a){a.node=R[a.node].index});break;case"circle":a.nodes.forEach(function(a){a.node=R[a.node].index})}else a.axis&&(a.left=R[a.left].index,a.right=R[a.right].index)}),M.on("tick",function(){var a=Date.now()-Z;H.showLayoutSteps()&&B(P,U,A,C,D,E,I,J),(T||H.timeLimit()&&a>H.timeLimit())&&(console.log("cancelled"),M.stop())});var W=o.filter(f(H.edgeIsLayout())),X=(o.filter(function(a){return!f(H.edgeIsLayout())(a)}),V.filter(function(a){return"circle"===a.type}));V=V.filter(function(a){return"circle"!==a.type}),X.forEach(function(a){var b=(a.distance||4*H.baseLength())/(2*Math.sin(Math.PI/a.nodes.length)),c=a.nodes.map(function(a){return a.node}),d=function(a){return f(H.nodeKey())(l[a])},e=v.wheel_edges(d,c,b).map(function(a){var b={internal:a};return b.source=R[a.sourcename],b.target=R[a.targetname],b});W=W.concat(e)});var Y=V.filter(function(a){return"ordering"===a.type});if(V=V.filter(function(a){return"ordering"!==a.type}),Y.forEach(function(a){var c=a.nodes.map(function(a){return R[a]});if(a.ordering){var d=b.quicksort.by(f(a.ordering));c=d(c,0,c.length)}var e;c.forEach(function(b,c){0===c?e=b:V.push({left:e.index,right:(e=b).index,axis:a.axis,gap:a.gap})})}),H.legend()&&H.legend().redraw(),t)return Q=!1,N.end(!1),this;var Z=Date.now();return M.nodes(l).links(W).constraints(V),N.start(),window.setTimeout(function(){M.start(10,20,20).on("end",function(){H.showLayoutSteps()?s(!0):B(P,U,A,C,D,E,I,J)}).on("start",function(){console.log("COLA START"),N.start()})}),this},H.render=function(){return H.initLayoutOnRedraw()||k(),H.resetSvg(),J=I.append("g").attr("class","dc-graph"),L=J.append("g"),K=J.append("g"),H.legend()&&H.legend().render(),H.redraw()},H.on=function(a,b){return N.on(a,b),this},H.getStats=function(){return O},H.select=function(a){return H.root().select(a)},H.selectAll=function(a){return H.root()?H.root().selectAll(a):null},H.svg=function(a){return arguments.length?(I=a,H):I},H.resetSvg=function(){return H.select("svg").remove(),E()},H.redrawGroup=function(){c.redrawAll(j)},H.renderGroup=function(){c.renderAll(j)},H.defineArrow=function(a,b,c,d,e,f){return I.append("svg:defs").append("svg:marker").attr("id",a).attr("viewBox","0 -5 10 10").attr("refX",d).attr("refY",e).attr("markerUnits","userSpaceOnUse").attr("markerWidth",b).attr("markerHeight",c).attr("orient","auto").call(f),H},H.root(a.select(i)),c.registerChart(H,j),H},v.legend=function(){var a,b={};return b.x=w(0),b.y=w(0),b.gap=w(5),b.nodeWidth=w(40),b.nodeHeight=w(40),b.exemplars=w({}),b.parent=w(null),b.redraw=function(){var c=b.parent().svg().selectAll("g.dc-graph-legend").data([0]);c.enter().append("g").attr("class","dc-graph-legend").attr("transform","translate("+b.x()+","+b.y()+")");var d=c.selectAll(".node").data(a,function(a){return a.name}),e=d.enter().append("g").attr("class","node");e.append("text").attr("class","legend-label"),d.attr("transform",function(a,c){return"translate("+b.nodeWidth()/2+","+(b.nodeHeight()+b.gap())*(c+.5)+")"}),d.select("text.legend-label").attr("transform","translate("+(b.nodeWidth()/2+b.gap())+",0)").text(function(a){return a.name}),b.parent()._buildNode(d,e)},b.render=function(){var c=b.exemplars();if(c instanceof Array)a=c.map(function(a){return{name:a.name,orig:{key:a.key,value:a.value}}});else{a=[];for(var d in c)a.push({name:d,orig:{key:d,value:c[d]}})}b.redraw()},b},v.constraint_pattern=function(a,b){var c={},d=[];return b.nodes.forEach(function(a){var b=a.id,d=c[b]||(c[b]={});if(a.partition){var e=a.partition,f=a.value||a.id;a.all||a.typename?(d.match=function(a){return a.value[e]},d.typename=a.typename||function(a){return e+"="+a.value[e]}):d.match=function(a){return a.value[e]===f}}else{if(!a.match)throw new Error("couldn't determine matcher for type "+JSON.stringify(a));d.match=a.match}}),b.edges.forEach(function(a){if(!a.disable){var b={source:a.source,target:a.target};b.produce="function"==typeof a.produce?a.produce:function(){return Object.create(a.produce)},["listname","wrap","reverse"].forEach(function(c){void 0!==a[c]&&(b[c]=a[c])}),d.push(b)}}),function(b,e,g){var h={};b.forEach(function(b){var d=f(a.nodeKey())(b);for(var e in c){var g=c[e],i=g.match(b.orig);if(i){var j=g.typename?g.typename(e,i):e;h[j]||(h[j]={nodes:[],whether:{}}),h[j].nodes.push(d),h[j].whether[d]=!0}}});var i=d.filter(function(a){return a.source!==a.target}),j=d.filter(function(a){return a.source===a.target});return e.forEach(function(c){var d=f(a.edgeSource())(c),j=f(a.edgeTarget())(c);i.forEach(function(a){if(h[a.source]&&h[a.source].whether[d]&&h[a.target]&&h[a.target].whether[j]){var c=a.produce(h,b,e);a.reverse?(c.left=j,c.right=d):(c.left=d,c.right=j),g.push(c)}})}),j.forEach(function(a){if(h[a.source]){var b=a.produce(),c=a.listname||a.produce.listname||"nodes",d=a.wrap||a.produce.wrap||function(a){return a};b[c]=h[a.source].nodes.map(d),g.push(b)}}),g}},v.gap_y=function(a,b){return{axis:"y",gap:a,equality:!!b}},v.gap_x=function(a,b){return{axis:"x",gap:a,equality:!!b}},v.align_y=function(){return u("y")},v.align_x=function(){return u("x")},v.order_x=function(a,b){return{type:"ordering",axis:"x",gap:60,ordering:b}},v.order_y=function(a,b){return{type:"ordering",axis:"y",gap:60,ordering:b}},v.tip=function(){function b(b){d||(d=a.tip().attr("class","d3-tip").html(function(a){return"<span>"+a+"</span>"}),c.parent().svg().call(d)),b.on("mouseover.tip",function(b){var e=a.event.target;c.content()(b,function(a){d.show(a,e)})}).on("mouseout.foo",function(){d.hide()})}var c={},d=null;return c.parent=w(null).react(function(a){a?a.on("drawn.tip",function(a){b(a)}):c.parent()&&c.parent().on("drawn.tip",null)}),c.content=w(function(a,b){b(c.parent()?f(c.parent().nodeTitle())(a):"")}),c},v.load_graph=function(b,c){var d=b.replace(/\?.*/,"");/\.json$/.test(d)?a.json(b,c):/\.gv|\.dot$/.test(d)&&a.text(b,function(a,b){if(a)return void c(a,null);var d=graphlibDot.parse(b),e=d.nodes(),f=new Array(e.length);e.forEach(function(a,b){var c=f[b]=d._nodes[e[b]];c.id=b,c.name=a});var g=d.edges(),h=[];g.forEach(function(a){var b=d._edges[a];h.push({source:d._nodes[b.u].id,target:d._nodes[b.v].id,sourcename:b.u,targetname:b.v})});var i={nodes:f,links:h};c(null,i)})},v.node_name=function(a){if(26>a)return String.fromCharCode(97+a);if(52>a)return String.fromCharCode(65+a-26);if(2704>a)return v.node_name(Math.floor(a/52))+v.node_name(a%52);throw new Error("no, that's too large")},v.node_object=function(a,b){return b=b||{},_.extend({id:a,name:v.node_name(a)},b)},v.edge_object=function(a,b,c,d){return d=d||{},_.extend({source:b,target:c,sourcename:a(b),targetname:a(c)},d)},v.generate=function(a,b,c,d){var e,f,g,h,i=c.nodePrefix||"",j=function(a){return e[a].name},k=b[0],l=c.linkLength||30;switch(a){case"clique":case"cliquestf":for(e=new Array(k),f=[],g=0;k>g;++g)for(e[g]=v.node_object(g,{circle:"A",name:i+v.node_name(g)}),h=0;g>h;++h)f.push(v.edge_object(j,g,h,{notLayout:!0,undirected:!0}));if("cliquestf"===a)for(g=0;k>g;++g)e[g+k]=v.node_object(g+k),e[g+2*k]=v.node_object(g+2*k),f.push(v.edge_object(j,g,g+k,{undirected:!0})),f.push(v.edge_object(j,g,g+2*k,{undirected:!0}));break;case"wheel":for(e=new Array(k),g=0;k>g;++g)e[g]=v.node_object(g,{name:i+v.node_name(g)});f=v.wheel_edges(j,_.range(k),k*l/2);var m=f[0].distance;for(g=0;g<b[1];++g)for(h=0;k>h;++h)f.push(v.edge_object(j,h,(h+1)%k,{distance:m,par:g+2}));break;default:throw new Error("unknown generation type "+a)}var n={nodes:e,links:f};d(null,n)},v.wheel_edges=function(a,b,c){for(var d=b.length,e=[],f=Math.floor(d/2),g=2*c*Math.sin(Math.PI/d),h=2*c*Math.sin(f*Math.PI/d),i=0;d>i;++i)e.push(v.edge_object(a,b[i],b[(i+1)%d],{distance:g}));for(i=0;d/2>i;++i)e.push(v.edge_object(a,b[i],b[(i+f)%d],{distance:h})),d%2&&i!=Math.floor(d/2)&&e.push(v.edge_object(a,b[i],b[(i+d-f)%d],{distance:h}));return e},v.d3=a,v.crossfilter=b,v.dc=c,v}if("function"==typeof define&&define.amd)define(["d3","crossfilter","dc"],a);else if("object"==typeof module&&module.exports){var b=require("d3"),c=require("crossfilter");"function"!=typeof c&&(c=c.crossfilter);var d=require("dc");module.exports=a(b,c,d)}else this.dc_graph=a(d3,crossfilter,dc)}();
//# sourceMappingURL=dc.graph.min.js.map