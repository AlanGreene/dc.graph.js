/*!
 *  dc.graph 0.1.0
 *  http://dc-js.github.io/dc.graph.js/
 *  Copyright (c) 2015 AT&T Intellectual Property
 *
 */

!function(){function a(a,b,c){"use strict";function d(a,b){return function(){return a(b.apply(null,arguments))}}function e(a){return u.functor_wrap(a,function(a){return a.orig})}function f(a,b,c){for(var d=["M",a[0],",",a[1]],e=b,f=!1,g=2;g<a.length;g+=2)(isNaN(a[g])||isNaN(a[g+1]))&&(f=!0),d.push(e===b?x[b]:" ",a[g],",",a[g+1]),0===--e&&(e=b);return e!=b&&console.log("warning: pts.length didn't match bezness",a,b),c&&d.push("Z"),d.join("")}function g(a,b,c,d){var e=Math.tan(Math.atan2(d,c));e*=e;var f={x:a*b/Math.sqrt(b*b+a*a*e),y:a*b/Math.sqrt(a*a+b*b/e)};return 0>c&&(f.x=-f.x),0>d&&(f.y=-f.y),f}function h(a,b,c){return b>=a-y&&c+y>=b}function i(a,b,c,d,e,f,g,i){var j=((a*d-b*c)*(e-g)-(a-c)*(e*i-f*g))/((a-c)*(f-i)-(b-d)*(e-g)),k=((a*d-b*c)*(f-i)-(b-d)*(e*i-f*g))/((a-c)*(f-i)-(b-d)*(e-g));if(isNaN(j)||isNaN(k))return!1;if(a>=c){if(!h(c,j,a))return!1}else if(!h(a,j,c))return!1;if(b>=d){if(!h(d,k,b))return!1}else if(!h(b,k,d))return!1;if(e>=g){if(!h(g,j,e))return!1}else if(!h(e,j,g))return!1;if(f>=i){if(!h(i,k,f))return!1}else if(!h(f,k,i))return!1;return{x:j,y:k}}function j(a,b,c,d,e){for(var f=0;f<a.length;f+=2){var g=f===a.length-2?0:f+2,h=i(a[f],a[f+1],a[g],a[g+1],b,c,d,e);if(h)return h}return null}function k(a,b,c,d){switch(b.dcg_shape.shape){case"ellipse":return g(b.dcg_rx,b.dcg_ry,c,d);case"polygon":return j(b.dcg_points,0,0,c,d)}}function l(a){switch(a.shape){case"ellipse":return{shape:"ellipse"};case"egg":return{shape:"polygon",sides:100,distortion:-.25};case"triangle":return{shape:"polygon",sides:3};case"diamond":return{shape:"polygon",sides:4,rotation:45};case"trapezium":return{shape:"polygon",sides:4,distortion:-.5};case"parallelogram":return{shape:"polygon",sides:4,skew:.5};case"pentagon":return{shape:"polygon",sides:5};case"hexagon":return{shape:"polygon",sides:6};case"septagon":return{shape:"polygon",sides:7};case"octagon":return{shape:"polygon",sides:8};case"invtriangle":return{shape:"polygon",sides:3,rotation:180};case"invtrapezium":return{shape:"polygon",sides:4,distortion:.5};case"square":return{shape:"polygon",sides:4};case"polygon":return{shape:"polygon",sides:a.sides,skew:a.skew,distortion:a.distortion,rotation:a.rotation};default:throw new Error("unknown shape "+a.shape)}}function m(a){return function(b){var c=e(a.nodeShape())(b);b.dcg_shape=l(c),b.dcg_shape["abstract"]=c}}function n(a){return function(b){var c=e(a.nodeShape())(b),d=b.dcg_shape["abstract"];return c.shape!==d.shape?!0:"polygon"===c.shape?c.shape.sides!==d.sides||c.shape.skew!==d.skew||c.shape.distortion!==d.distortion||c.shape.rotation!==d.rotation:!1}}function o(){return function(a){var b,c=a.dcg_shape.shape;switch(c){case"ellipse":b="ellipse";break;case"polygon":b="path";break;default:throw new Error("unknown shape "+c)}return document.createElementNS("http://www.w3.org/2000/svg",b)}}function p(a){return function(b){var c,d=e(a.nodeRadius())(b),f=2*d+a.nodePadding();e(a.nodeFitLabel())(b)&&(c=this.getBBox());var g=0;if(c&&c.width&&c.height){var h=c.height/2/d,i=c.width/2/Math.sqrt(1-h*h);g=2*i+a.nodePadding(),b.dcg_rx=Math.max(i,d),b.dcg_ry=d,"polygon"===b.dcg_shape.shape&&(b.dcg_rx/=Math.cos(Math.PI/b.dcg_shape.sides))}else b.dcg_rx=b.dcg_ry=d;b.width=Math.max(g,f),b.height=f}}function q(){return{rx:function(a){return a.dcg_rx},ry:function(a){return a.dcg_ry}}}function r(){return{d:function(a){var b=a.dcg_shape,c=b.sides||4,d=b.skew||0,e=b.distortion||0,g=b.rotation||0,h=c%2?0:.5,i=[];g=g/360+.25;for(var j=0;c>j;++j){var k=-((j+h)/c+g)*Math.PI*2,l=a.dcg_rx*Math.cos(k),m=a.dcg_ry*Math.sin(k);l*=1+e*((a.dcg_ry-m)/a.dcg_ry-1),l-=d*m/2,i.push(l,m)}return a.dcg_points=i,f(i,1,!0)}}}function s(b){return function(c){var d=a.select(this);switch(c.dcg_shape.shape){case"ellipse":d.attr(q(b,c));break;case"polygon":d.attr(r(b,c));break;default:throw new Error("unknown shape "+c.dcg_shape.shape)}}}function t(a){var b=function(){return{type:"alignment",axis:a}};return b.listname="offsets",b.wrap=function(a){return{node:a,offset:0}},b}var u={version:"0.1.0"},v=function(a){var b=a,c=null,d=function(a){return arguments.length?(c&&c(a),b=a,this):b};return d.react=function(a){return arguments.length?(c=a,this):c},d},w=function(a){return a};u.functor_wrap=function(a,b){return"function"==typeof a?b?function(c){return a(b(c))}:a:function(){return a}};var x={1:"L",2:"Q",3:"C"},y=1e-7;return u.diagram=function(h,i){function j(){switch(L=cola.d3adaptor().avoidOverlaps(!0).size([G.width(),G.height()]).handleDisconnected(G.handleDisconnected()),G.lengthStrategy()){case"symmetric":L.symmetricDiffLinkLengths(G.baseLength());break;case"jaccard":L.jaccardLinkLengths(G.baseLength());break;case"individual":L.linkDistance(function(a){var b=a.orig?e(G.edgeLength())(a):a.internal&&a.internal.distance;return b||G.baseLength()});break;case"none":}G.modLayout()&&G.modLayout()(L)}function l(a){return"edge-"+e(G.edgeKey())(a).replace(/[^\w-_]/g,"-")}function q(a){return!!a.source&&!!a.target}function r(a){M.end(a),P=!1,S&&(S=!1,window.setTimeout(function(){G.startLayout()},0))}function t(a,b,c,d,h){var i,j,l,m,n,o,p=d-b,q=h-c,r=a.source.dcg_ry+e(G.nodeStrokeWidth())(a.source)/2,s=a.target.dcg_ry+e(G.nodeStrokeWidth())(a.target)/2;if(a.parallel){var t=!!(a.parallel%2)==d>b?-1:1,u=Math.floor((a.parallel+1)/2)*t,v=Math.atan2(q,p),w=v+u*G.parallelEdgeOffset()/r,x=v-Math.PI-u*G.parallelEdgeOffset()/s,y=Math.cos(w),z=Math.sin(w),A=Math.cos(x),B=Math.sin(x),C=Math.hypot(d-b,h-c);n=g(a.source.dcg_rx,a.source.dcg_ry,y,z),o=g(a.target.dcg_rx,a.target.dcg_ry,A,B);var D=Math.hypot(n.x,n.y),E=Math.hypot(o.x,o.y),F=Math.max(D+r/4,Math.min(2*D,C/2)),H=Math.min(E+s/4,Math.min(2*E,C/2));i=b+n.x,j=c+n.y;var I=b+F*y,J=c+F*z,K=d+H*A,L=h+H*B;return l=d+o.x,m=h+o.y,a.length=Math.hypot(l-i,m-j),f([i,j,I,J,K,L,l,m],3)}return n=k(G,a.source,p,q),o=k(G,a.target,-p,-q),n||(n={x:0,y:0}),o||(o={x:0,y:0}),i=b+n.x,j=c+n.y,l=d+o.x,m=h+o.y,a.length=Math.hypot(l-i,m-j),f([i,j,l,m],1)}function x(a){return t(a,a.source.prevX||a.source.x,a.source.prevY||a.source.y,a.target.prevX||a.target.x,a.target.prevY||a.target.y)}function y(a){return t(a,a.source.x,a.source.y,a.target.x,a.target.y)}function z(a,b){a.every(function(a){return 0===a.size()})&&b();var c=0;a.forEach(function(a){a.each(function(){++c}).each("end.all",function(){--c||b()})})}function A(a,b,c,d,f,g,h){console.assert(P),console.assert(c.data().every(q)),b.attr("transform",function(a){return"translate("+a.x+","+a.y+")"});var i=a.transition().duration(G.transitionDuration()).attr("opacity","1").attr("transform",function(a){return"translate("+a.x+","+a.y+")"});i.each("end.record",function(a){a.prevX=a.x,a.prevY=a.y}),d.attr("d",x);var j=c.transition().duration(G.transitionDuration()).attr("opacity",e(G.edgeOpacity())).attr("d",y);G.showLayoutSteps()||z([i,j],function(){r(!0)}),f.attr("d",y),h.transition().duration(G.transitionDuration()).attr("transform",function(a){if(a.target.x<a.source.x){var b=this.getBBox(),c=b.x+b.width/2,d=b.y+b.height/2;return"rotate(180 "+c+" "+d+")"}return"rotate(0)"})}function B(){I.attr("transform","translate("+a.event.translate+") scale("+a.event.scale+")")}function C(){H&&H.attr("width",G.width()).attr("height",G.height())}function D(){return H=G.root().append("svg"),C(),G.defineArrow("vee",12,12,10,0,function(a){a.append("svg:path").attr("d","M0,-5 L10,0 L0,5 L3,0").attr("stroke-width","0px")}),G.defineArrow("dot",7,7,0,0,function(a){a.append("svg:circle").attr("r",5).attr("cx",5).attr("cy",0).attr("stroke-width","0px")}),G.mouseZoomable()&&H.call(a.behavior.zoom().on("zoom",B)),H}var E,F,G={},H=null,I=null,J=null,K=null,L=null,M=a.dispatch("end","start","drawn"),N={},O={},P=!1;G.width=v(200).react(C),G.height=v(200).react(C),G.root=v(null).react(function(a){a.empty()&&console.log("Warning: parent selector "+h+" doesn't seem to exist")}),G.mouseZoomable=v(!0),G.nodeDimension=v(),G.nodeGroup=v(),G.edgeDimension=v(),G.edgeGroup=v(),G.nodeKey=G.nodeKeyAccessor=v(function(a){return a.key}),G.edgeKey=G.edgeKeyAccessor=v(function(a){return a.key}),G.edgeSource=G.sourceAccessor=v(function(a){return a.value.sourcename}),G.edgeTarget=G.targetAccessor=v(function(a){return a.value.targetname}),G.nodeRadius=G.nodeRadiusAccessor=v(25),G.nodeStrokeWidth=G.nodeStrokeWidthAccessor=v(1),G.nodeStroke=G.nodeStrokeAccessor=v("black"),G.nodeFillScale=v(null),G.nodeFill=G.nodeFillAccessor=v("white"),G.nodePadding=v(6),G.nodeLabel=G.nodeLabelAccessor=v(function(a){return a.value.label||a.value.name}),G.nodeLabelFill=G.nodeLabelFillAccessor=v(null),G.nodeFitLabel=G.nodeFitLabelAccessor=v(!0),G.nodeShape=v({shape:"ellipse"}),G.nodeTitle=G.nodeTitleAccessor=v(function(a){return G.nodeKeyAccessor()(a)}),G.nodeOrdering=v(null),G.nodeFixed=G.nodeFixedAccessor=v(null),G.edgeStroke=G.edgeStrokeAccessor=v("black"),G.edgeStrokeWidth=G.edgeStrokeWidthAccessor=v(1),G.edgeOpacity=G.edgeOpacityAccessor=v(1),G.edgeLabel=G.edgeLabelAccessor=v(function(a){return G.edgeKey()(a)}),G.edgeArrowhead=G.edgeArrowheadAccessor=v("vee"),G.edgeArrowtail=G.edgeArrowtailAccessor=v(null),G.edgeIsLayout=G.edgeIsLayoutAccessor=v(function(a){return!a.value.notLayout}),G.lengthStrategy=v("symmetric"),G.edgeLength=G.edgeDistanceAccessor=v(function(a){return a.value.distance}),G.baseLength=v(30),G.highlightNeighbors=v(!1),G.transitionDuration=v(500),G.timeLimit=v(0),G.constrain=v(function(){return[]}),G.parallelEdgeOffset=v(5),G.edgeOrdering=v(null),G.initLayoutOnRedraw=v(!1),G.layoutUnchanged=v(!1),G.relayout=function(){return E=F=null,this},G.induceNodes=v(!1),G.modLayout=v(function(){}),G.showLayoutSteps=v(!1),G.legend=v(null).react(function(a){a.parent(G)}),G.child=function(a,b){return O[a]&&O[a].parent(null),O[a]=b,b.parent(G),G},G.handleDisconnected=v(!0);var Q={},R={};G._buildNode=function(a,b){G.nodeTitle()&&b.append("title"),b.each(m(G));var c=a.filter(n(G));c.select(".node-shape").remove(),c.each(m(G)),c.insert(o(G),":first-child").attr("class","node-shape"),b.append(o(G)).attr("class","node-shape"),b.append("text").attr("class","node-label").attr("fill",e(G.nodeLabelFill())),a.select("title").text(e(G.nodeTitle())),a.select("text.node-label").text(e(G.nodeLabel())).each(p(G)),a.select(".node-shape").each(s(G)).attr({stroke:e(G.nodeStroke()),"stroke-width":e(G.nodeStrokeWidth()),fill:d(G.nodeFillScale()||w,e(G.nodeFill()))})},G.isRunning=function(){return P};var S=!1;return G.redraw=function(){return P?(S=!0,this):G.startLayout()},G.startLayout=function(){function c(a){var b=G.nodeKey()(a);Q[b]||(Q[b]={});var c=Q[b];c.orig=a;var d;return G.nodeFixed()&&(d=e(G.nodeFixed())(c)),d?(c.x=a.x,c.y=a.y,c.fixed=!0):c.fixed=!1,i[b]=!0,c}function d(a){var b=G.edgeKey()(a);R[b]||(R[b]={});var c=R[b];return c.orig=a,c.source=Q[G.edgeSource()(a)],c.target=Q[G.edgeTarget()(a)],k[b]=!0,c}function f(a){return a.orig}var g=G.nodeGroup().all(),h=G.edgeGroup().all();if(P)throw new Error("dc_graph.diagram.redraw already running!");P=!0,L&&L.stop(),G.initLayoutOnRedraw()&&j(),G.nodeOrdering()&&(g=b.quicksort.by(G.nodeOrdering())(g.slice(0),0,g.length)),G.edgeOrdering()&&(h=b.quicksort.by(G.edgeOrdering())(h.slice(0),0,h.length));var i={},k={},m=g.map(c);for(var n in Q)i[n]||delete Q[n];var o=h.map(d);for(var p in R)k[p]||delete R[p];if(o=o.filter(q),o=o.filter(function(a){return a.source!==a.target}),G.induceNodes()){var s={};o.forEach(function(a){s[e(G.edgeSource())(a)]=!0,s[e(G.edgeTarget())(a)]=!0}),m=m.filter(function(a){return s[e(G.nodeKey())(a)]})}m.forEach(function(a,b){a.index=b}),N={nnodes:m.length,nedges:o.length};var t=!1;if(!G.layoutUnchanged()){var v=JSON.stringify(m.map(f)),w=JSON.stringify(o.map(f));v===E&&w===F&&(t=!0),E=v,F=w}if(G.parallelEdgeOffset()){for(var x=new Array(m.length),y=0;y<x.length;++y){x[y]=new Array(x.length);for(var z=0;z<x.length;++z)x[y][z]=0}o.forEach(function(a){var b=Math.min(a.source.index,a.target.index),c=Math.max(a.source.index,a.target.index);a.parallel=x[b][c]++})}var B=K.selectAll(".edge").data(o,e(G.edgeKey())),C=B.enter().append("svg:path").attr({"class":"edge",id:l,opacity:0});B.attr("stroke",e(G.edgeStroke())).attr("stroke-width",e(G.edgeStrokeWidth())).attr("marker-end",function(a){var b=e(G.edgeArrowhead())(a);return b?"url(#"+b+")":null}).attr("marker-start",function(a){var b=e(G.edgeArrowtail())(a);return b?"url(#"+b+")":null}),B.exit().transition().duration(G.transitionDuration()).attr("opacity",0).remove();var D=K.selectAll(".edge-hover").data(o,e(G.edgeKey())),H=D.enter().append("svg:path").attr("class","edge-hover").attr("opacity",0).attr("stroke","green").attr("stroke-width",10).on("mouseover",function(b){a.select("#"+l(b)+"-label").attr("visibility","visible")}).on("mouseout",function(b){a.select("#"+l(b)+"-label").attr("visibility","hidden")});D.exit().remove();var I=K.selectAll(".edge-label").data(o,e(G.edgeKey())),O=I.enter().append("text").attr("id",function(a){return l(a)+"-label"}).attr("visibility","hidden").attr({"class":"edge-label","text-anchor":"middle",dy:-2}).append("textPath").attr("startOffset","50%").attr("xlink:href",function(a){return"#"+l(a)}).text(function(a){return e(G.edgeLabel())(a)});I.exit().transition().duration(G.transitionDuration()).attr("opacity",0).remove();var T=J.selectAll(".node").data(m,e(G.nodeKey())),U=T.enter().append("g").attr("class","node").attr("opacity","0").call(L.drag);G.highlightNeighbors()&&U.on("mouseover",function(a){B.attr("stroke-width",function(b){return(b.source===a||b.target===a?2:1)*e(G.edgeStrokeWidth())(b)})}).on("mouseout",function(){B.attr("stroke-width",e(G.edgeStrokeWidth()))}),G._buildNode(T,U),T.exit().transition().duration(G.transitionDuration()).attr("opacity",0).remove(),M.drawn(T,B);var V=G.constrain()(m,o);V.forEach(function(a){if(a.type)switch(a.type){case"alignment":a.offsets.forEach(function(a){a.node=Q[a.node].index});break;case"circle":a.nodes.forEach(function(a){a.node=Q[a.node].index})}else a.axis&&(a.left=Q[a.left].index,a.right=Q[a.right].index)}),L.on("tick",function(){var a=Date.now()-Z;G.showLayoutSteps()&&A(T,U,B,C,D,H,I,O),(S||G.timeLimit()&&a>G.timeLimit())&&(console.log("cancelled"),L.stop())});var W=o.filter(e(G.edgeIsLayout())),X=(o.filter(function(a){return!e(G.edgeIsLayout())(a)}),V.filter(function(a){return"circle"===a.type}));V=V.filter(function(a){return"circle"!==a.type}),X.forEach(function(a){var b=(a.distance||4*G.baseLength())/(2*Math.sin(Math.PI/a.nodes.length)),c=a.nodes.map(function(a){return a.node}),d=function(a){return e(G.nodeKey())(m[a])},f=u.wheel_edges(d,c,b).map(function(a){var b={internal:a};return b.source=Q[a.sourcename],b.target=Q[a.targetname],b});W=W.concat(f)});var Y=V.filter(function(a){return"ordering"===a.type});if(V=V.filter(function(a){return"ordering"!==a.type}),Y.forEach(function(a){var c=a.nodes.map(function(a){return Q[a]});if(a.ordering){var d=b.quicksort.by(e(a.ordering));c=d(c,0,c.length)}var f;c.forEach(function(b,c){0===c?f=b:V.push({left:f.index,right:(f=b).index,axis:a.axis,gap:a.gap})})}),G.legend()&&G.legend().redraw(),t)return P=!1,M.end(!1),this;var Z=Date.now();return L.nodes(m).links(W).constraints(V),M.start(),window.setTimeout(function(){L.start(10,20,20).on("end",function(){G.showLayoutSteps()?r(!0):A(T,U,B,C,D,H,I,O)}).on("start",function(){console.log("COLA START"),M.start()})}),this},G.render=function(){return G.initLayoutOnRedraw()||j(),G.resetSvg(),I=H.append("g").attr("class","dc-graph"),K=I.append("g"),J=I.append("g"),G.legend()&&G.legend().render(),G.redraw()},G.on=function(a,b){return M.on(a,b),this},G.getStats=function(){return N},G.select=function(a){return G.root().select(a)},G.selectAll=function(a){return G.root()?G.root().selectAll(a):null},G.svg=function(a){return arguments.length?(H=a,G):H},G.resetSvg=function(){return G.select("svg").remove(),D()},G.redrawGroup=function(){c.redrawAll(i)},G.renderGroup=function(){c.renderAll(i)},G.defineArrow=function(a,b,c,d,e,f){H.append("svg:defs").append("svg:marker").attr("id",a).attr("viewBox","0 -5 10 10").attr("refX",d).attr("refY",e).attr("markerUnits","userSpaceOnUse").attr("markerWidth",b).attr("markerHeight",c).attr("orient","auto").call(f)},G.root(a.select(h)),c.registerChart(G,i),G},u.legend=function(){var a,b={};return b.x=v(0),b.y=v(0),b.gap=v(5),b.nodeWidth=v(40),b.nodeHeight=v(40),b.exemplars=v({}),b.parent=v(null),b.redraw=function(){var c=b.parent().svg().selectAll("g.dc-graph-legend").data([0]);c.enter().append("g").attr("class","dc-graph-legend").attr("transform","translate("+b.x()+","+b.y()+")");var d=c.selectAll(".node").data(a,function(a){return a.name}),e=d.enter().append("g").attr("class","node");e.append("text").attr("class","legend-label"),d.attr("transform",function(a,c){return"translate("+b.nodeWidth()/2+","+(b.nodeHeight()+b.gap())*(c+.5)+")"}),d.select("text.legend-label").attr("transform","translate("+(b.nodeWidth()/2+b.gap())+",0)").text(function(a){return a.name}),b.parent()._buildNode(d,e)},b.render=function(){var c=b.exemplars();if(c instanceof Array)a=c.map(function(a){return{name:a.name,orig:{key:a.key,value:a.value}}});else{a=[];for(var d in c)a.push({name:d,orig:{key:d,value:c[d]}})}b.redraw()},b},u.constraint_pattern=function(a,b){var c={},d=[];return b.nodes.forEach(function(a){var b=a.id,d=c[b]||(c[b]={});if(a.partition){var e=a.partition,f=a.value||a.id;a.all||a.typename?(d.match=function(a){return a.value[e]},d.typename=a.typename||function(a){return e+"="+a.value[e]}):d.match=function(a){return a.value[e]===f}}else{if(!a.match)throw new Error("couldn't determine matcher for type "+JSON.stringify(a));d.match=a.match}}),b.edges.forEach(function(a){if(!a.disable){var b={source:a.source,target:a.target};b.produce="function"==typeof a.produce?a.produce:function(){return Object.create(a.produce)},["listname","wrap","reverse"].forEach(function(c){void 0!==a[c]&&(b[c]=a[c])}),d.push(b)}}),function(b,f,g){var h={};b.forEach(function(b){var d=e(a.nodeKey())(b);for(var f in c){var g=c[f],i=g.match(b.orig);if(i){var j=g.typename?g.typename(f,i):f;h[j]||(h[j]={nodes:[],whether:{}}),h[j].nodes.push(d),h[j].whether[d]=!0}}});var i=d.filter(function(a){return a.source!==a.target}),j=d.filter(function(a){return a.source===a.target});return f.forEach(function(c){var d=e(a.edgeSource())(c),j=e(a.edgeTarget())(c);i.forEach(function(a){if(h[a.source]&&h[a.source].whether[d]&&h[a.target]&&h[a.target].whether[j]){var c=a.produce(h,b,f);a.reverse?(c.left=j,c.right=d):(c.left=d,c.right=j),g.push(c)}})}),j.forEach(function(a){if(h[a.source]){var b=a.produce(),c=a.listname||a.produce.listname||"nodes",d=a.wrap||a.produce.wrap||function(a){return a};b[c]=h[a.source].nodes.map(d),g.push(b)}}),g}},u.gap_y=function(a,b){return{axis:"y",gap:a,equality:!!b}},u.gap_x=function(a,b){return{axis:"x",gap:a,equality:!!b}},u.align_y=function(){return t("y")},u.align_x=function(){return t("x")},u.order_x=function(a,b){return{type:"ordering",axis:"x",gap:60,ordering:b}},u.order_y=function(a,b){return{type:"ordering",axis:"y",gap:60,ordering:b}},u.tip=function(){function b(b){d||(d=a.tip().attr("class","d3-tip").html(function(a){return"<span>"+a+"</span>"}),c.parent().svg().call(d)),b.on("mouseover.tip",function(b){var e=a.event.target;c.content()(b,function(a){d.show(a,e)})}).on("mouseout.foo",function(){d.hide()})}var c={},d=null;return c.parent=v(null).react(function(a){a?a.on("drawn.tip",function(a){b(a)}):c.parent()&&c.parent().on("drawn.tip",null)}),c.content=v(function(a,b){b(c.parent()?e(c.parent().nodeTitle())(a):"")}),c},u.load_graph=function(b,c){var d=b.replace(/\?.*/,"");/\.json$/.test(d)?a.json(b,c):/\.gv|\.dot$/.test(d)&&a.text(b,function(a,b){if(a)return void c(a,null);var d=graphlibDot.parse(b),e=d.nodes(),f=new Array(e.length);e.forEach(function(a,b){var c=f[b]=d._nodes[e[b]];c.id=b,c.name=a});var g=d.edges(),h=[];g.forEach(function(a){var b=d._edges[a];h.push({source:d._nodes[b.u].id,target:d._nodes[b.v].id,sourcename:b.u,targetname:b.v})});var i={nodes:f,links:h};c(null,i)})},u.node_name=function(a){if(26>a)return String.fromCharCode(97+a);if(52>a)return String.fromCharCode(65+a-26);if(2704>a)return u.node_name(Math.floor(a/52))+u.node_name(a%52);throw new Error("no, that's too large")},u.node_object=function(a,b){return b=b||{},_.extend({id:a,name:u.node_name(a)},b)},u.edge_object=function(a,b,c,d){return d=d||{},_.extend({source:b,target:c,sourcename:a(b),targetname:a(c)},d)},u.generate=function(a,b,c,d){var e,f,g,h,i=c.nodePrefix||"",j=function(a){return e[a].name},k=b[0],l=c.linkLength||30;switch(a){case"clique":case"cliquestf":for(e=new Array(k),f=[],g=0;k>g;++g)for(e[g]=u.node_object(g,{circle:"A",name:i+u.node_name(g)}),h=0;g>h;++h)f.push(u.edge_object(j,g,h,{notLayout:!0,undirected:!0}));if("cliquestf"===a)for(g=0;k>g;++g)e[g+k]=u.node_object(g+k),e[g+2*k]=u.node_object(g+2*k),f.push(u.edge_object(j,g,g+k,{undirected:!0})),f.push(u.edge_object(j,g,g+2*k,{undirected:!0}));break;case"wheel":for(e=new Array(k),g=0;k>g;++g)e[g]=u.node_object(g,{name:i+u.node_name(g)});f=u.wheel_edges(j,_.range(k),k*l/2);var m=f[0].distance;for(g=0;g<b[1];++g)for(h=0;k>h;++h)f.push(u.edge_object(j,h,(h+1)%k,{distance:m,par:g+2}));break;default:throw new Error("unknown generation type "+a)}var n={nodes:e,links:f};d(null,n)},u.wheel_edges=function(a,b,c){for(var d=b.length,e=[],f=Math.floor(d/2),g=2*c*Math.sin(Math.PI/d),h=2*c*Math.sin(f*Math.PI/d),i=0;d>i;++i)e.push(u.edge_object(a,b[i],b[(i+1)%d],{distance:g}));for(i=0;d/2>i;++i)e.push(u.edge_object(a,b[i],b[(i+f)%d],{distance:h})),d%2&&i!=Math.floor(d/2)&&e.push(u.edge_object(a,b[i],b[(i+d-f)%d],{distance:h}));return e},u.d3=a,u.crossfilter=b,u.dc=c,u}if("function"==typeof define&&define.amd)define(["d3","crossfilter","dc"],a);else if("object"==typeof module&&module.exports){var b=require("d3"),c=require("crossfilter");"function"!=typeof c&&(c=c.crossfilter);var d=require("dc");module.exports=a(b,c,d)}else this.dc_graph=a(d3,crossfilter,dc)}();
//# sourceMappingURL=dc.graph.min.js.map